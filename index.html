<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>AR —Å 3D-–º–æ–¥–µ–ª—å—é –∏ –∑–≤—É–∫–æ–º</title>

  <!-- A-Frame –∏ AR.js -->
  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.5/aframe/build/aframe-ar.js"></script>

  <style>
    /* –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ */
    #soundBtn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 20px;
      background: #ff4747;
      color: white;
      border-radius: 10px;
      font-size: 18px;
      border: none;
      cursor: pointer;
      z-index: 9999;
    }
  </style>
</head>

<body style="margin: 0; overflow: hidden;">

  <!-- –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ -->
  <button id="soundBtn">üîä –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>

  <a-scene embedded arjs="patternRatio: 0.7">

    <!-- –ú–∞—Ä–∫–µ—Ä -->
    <a-marker id="marker" type="pattern" url="marker.patt">

      <!-- 3D-–º–æ–¥–µ–ª—å -->
      <a-gltf-model 
        src="choroon.glb"
        scale="1 1 1"
        position="0 0 0"
        rotation="0 180 0">
      </a-gltf-model>

      <!-- –ó–≤—É–∫ -->
      <a-sound 
        id="mysound"
        src="audio.mp3"
        autoplay="false"
        loop="true"
        volume="1.0">
      </a-sound>

    </a-marker>

    <!-- –ö–∞–º–µ—Ä–∞ -->
    <a-entity camera></a-entity>

  </a-scene>

  <script>
    // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    const button = document.querySelector("#soundBtn");
    const marker = document.querySelector("#marker");
    const sound = document.querySelector("#mysound");

    let soundEnabled = false; // –∑–≤—É–∫ –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω

    // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–≤—É–∫
    button.addEventListener("click", () => {
      soundEnabled = true;
      button.style.display = "none"; // —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
    });

    // –ú–∞—Ä–∫–µ—Ä –Ω–∞–π–¥–µ–Ω ‚Üí –∑–∞–ø—É—Å–∫–∞–µ–º –∑–≤—É–∫
    marker.addEventListener("markerFound", () => {
      if (soundEnabled) {
        sound.components.sound.playSound();
      }
    });

    // –ú–∞—Ä–∫–µ—Ä –ø–æ—Ç–µ—Ä—è–Ω ‚Üí –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫
    marker.addEventListener("markerLost", () => {
      sound.components.sound.stopSound();
    });
  </script>

</body>
</html>

